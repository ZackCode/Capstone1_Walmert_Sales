#LyX 2.2 created this file. For more info see http://www.lyx.org/
\lyxformat 508
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
% for subfigures/subtables
\usepackage[caption=false,font=footnotesize]{subfig}
\end_preamble
\use_default_options false
\maintain_unincluded_children false
\language english
\language_package none
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command bibtex
\index_command default
\float_placement tbh
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_title "Your Title"
\pdf_author "Your Name"
\pdf_bookmarks true
\pdf_bookmarksnumbered true
\pdf_bookmarksopen true
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle false
\pdf_quoted_options "pdfpagelayout=OneColumn, pdfnewwindow=true, pdfstartview=XYZ, plainpages=false"
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 0
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 0
\use_package mhchem 1
\use_package stackrel 0
\use_package stmaryrd 0
\use_package undertilde 0
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Capstone Project I Final Report: Walmart Sales in Extreme Weather Days
\end_layout

\begin_layout Author
Zexi
\begin_inset space ~
\end_inset

Yu
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
This is the final report for my first capstone project in Springboard based
 on my milestone report.
 Originally from a kaggle competition, this project targets to build a system
 that will predict item sales in extreme weather events for Walmart using
 machine learning techniques.
 All the coding files for this project can be found in 
\begin_inset CommandInset citation
LatexCommand cite
key "codeloc"

\end_inset

.
\end_layout

\begin_layout Standard
This report will include the following sections:
\end_layout

\begin_layout Itemize
Problem Description: In this section, I will define the problem that needs
 to be solved in this capstone project, point out the potential client,
 and describe how the result from this capstone project will benefit them.
 
\end_layout

\begin_layout Itemize
Dataset Description: In this section, I will give the source of the datasets
 used in this capstone project, explaining the datasets' content, as well
 as the meaning for each column in the datasets.
 
\end_layout

\begin_layout Itemize
Data Wrangling: In order to perform machine learning algorithms, the data
 must be merged and cleaned.
 This process is called data wrangling.
 This subsection describes all the data wrangling steps used in this project.
 
\end_layout

\begin_layout Itemize
Feature Selection: Some algorithms in machine learning, like linear regression,
 require the features to be linear independent in order to have good performance.
 Also, some additional features are added in this section to enhance the
 algorithm performance.
 
\end_layout

\begin_layout Itemize
Initial Observation: In this section, I will show the initial observation
 of the dataset in order to try to identify useful features for the learning
 task.
 
\end_layout

\begin_layout Itemize
Learning Method: In this section, I will give the details for the learning
 method, including: 
\end_layout

\begin_deeper
\begin_layout Itemize
Overall Structure: This subsection describes the general structure of the
 learning process.
 
\end_layout

\begin_layout Itemize
Algorithms: This section describes the machine learning techniques used
 in the project.
 It includes subsections for each algorithm: SVM, decision tree & random
 forest, and neural network.
 
\end_layout

\end_deeper
\begin_layout Itemize
Result and Performance: The prediction results on testing set are submitted
 to the kaggle website.
 The website then gives the root mean squared logarithmic error (RMSLE)
 and ranking for each result submitted.
 Then, I evaluate the performance of each algorithm based on its RMSLE score.
 
\end_layout

\begin_layout Itemize
Conclusion: This section concludes the report by reinstating the learning
 object, the learning algorithms, and their performance.
\end_layout

\begin_layout Standard
This project uses python as the coding language.
 I use Lyx
\begin_inset CommandInset citation
LatexCommand cite
key "lyx"

\end_inset

 as editing tool for this report.
 
\end_layout

\begin_layout Section
Problem Description
\end_layout

\begin_layout Subsection
Problem Definition
\end_layout

\begin_layout Standard
As stated above, this project comes from a kaggle competition.
 Walmart wants to know the correlation between weather condition and its
 sales record.
 More specifically, Walmart wants a model that can "accurately predict the
 sales of 111 potentially weather-sensitive products (like umbrellas, bread,
 and milk) around the time of major weather events at 45 of their retail
 locations".
\end_layout

\begin_layout Standard
To this end, in this capstone project I would like to accomplish the following
 objects: 
\end_layout

\begin_layout Enumerate
A model that will predict product sales in major weather events 
\end_layout

\begin_layout Enumerate
Evaluate how the weather condition affect the sales 
\end_layout

\begin_layout Subsection
Potential Benefit for Client
\end_layout

\begin_layout Standard
According to the description of the kaggle competition, the model will help
 Walmart in the following aspects:
\end_layout

\begin_layout Itemize
It will help Walmart better manage its inventory, and keep its customers
 out of rain.
 
\end_layout

\begin_layout Itemize
It will help Walmart better evaluate the effectiveness of its current management
 against weather event 
\end_layout

\begin_layout Section
Dataset Description
\end_layout

\begin_layout Standard
The data can be found at kaggle in this link: https://www.kaggle.com/c/walmart-rec
ruiting-sales-in-stormy-weather
\end_layout

\begin_layout Standard
Four datasets are provided:
\end_layout

\begin_layout Itemize
train.csv: a training sales dataset with date, store number, item number
 and its corresponding sales record.
 
\end_layout

\begin_layout Itemize
test.csv: a testing sales dataset with only date, store number, and item
 number.
 The prediction on this dataset is then submitted to kaggle for performance
 evaluation.
 
\end_layout

\begin_layout Itemize
weather.csv: a weather dataset recording all weather conditions with weather
 station number, rainfall, wind, temperature, and many other features.
 
\end_layout

\begin_layout Itemize
key.csv: a correlation dataset linking store with its nearest weather station.
\end_layout

\begin_layout Standard
After merging those datasets into one dataset, we can see the following
 columns appeared in the final dataset:
\end_layout

\begin_layout Itemize
date: year-month-day format 
\end_layout

\begin_layout Itemize
store_nbr: Walmart store number 
\end_layout

\begin_layout Itemize
item_nbr: item number, 117 of them, each number indicates one item, we do
 not have further information about what precise item would that be.
 
\end_layout

\begin_layout Itemize
units: number of items sold on that day 
\end_layout

\begin_layout Itemize
station_nbr: weather station number 
\end_layout

\begin_layout Itemize
tmax, tmin, tavg, depart, dewpoint, wetbulb: temperature max, min, average,
 departure from normal, average dew point, average wet bulb.
 in Fahrenheit 
\end_layout

\begin_layout Itemize
sunrise, sunset: time of sunrise and sunset 
\end_layout

\begin_layout Itemize
codesum: special code in letters indicating the weather conditions of that
 day, such as RA as rain, SN as snowing 
\end_layout

\begin_layout Itemize
snowfall: snow/ice on the ground in inches at 1200 UTC 
\end_layout

\begin_layout Itemize
preciptotal: 24-hour snowdrop in inches 
\end_layout

\begin_layout Itemize
stnpressure: air pressure 
\end_layout

\begin_layout Itemize
sealevel: in meters 
\end_layout

\begin_layout Itemize
resultspeed: resultant wind speed, miles per hour 
\end_layout

\begin_layout Itemize
resultdir: resultant wind direction, in degrees 
\end_layout

\begin_layout Itemize
avgspeed: average wind speed, miles per hour
\end_layout

\begin_layout Standard
I will talk about data merging in more details in subsection data wrangling
 of section learning method.
 
\end_layout

\begin_layout Section
Data Wrangling
\end_layout

\begin_layout Standard
As stated above, the data must be merged, interpolated and cleaned before
 passing to machine learning algorithms.
 
\end_layout

\begin_layout Subsection
Data Merge
\end_layout

\begin_layout Standard
The goal of this project is to predict item sales based on weather data.
 The sales record is stored in train.csv, and weather record is stored in
 weather.csv.
 Data from key.csv indicates the corresponding relationship between the store
 and weather station.
\end_layout

\begin_layout Standard
Naturally, the first step for this project would be merging the information
 from the datasets together based on the information from key.csv file.
 Given a sales record, the program looks up its corresponding weather station
 number based on its store number, and append the weather information from
 the weather station on that day to the sales record.
\end_layout

\begin_layout Standard
The code for this part is in preprocessing.py file.
\end_layout

\begin_layout Subsection
Data Interpolation
\end_layout

\begin_layout Standard
Since the object is predicting sales record in near weather events, it is
 necessary to highlight data of those events.
 A weather event is defined as rainy days with 1 inch or more rainfall,
 or snowy days with 2 inches or more snowfall.
\end_layout

\begin_layout Standard
Some content in the data needs to be pre-processed before passing to next
 stage.
 For example, in the preciptotal, the record 
\begin_inset Quotes eld
\end_inset

T
\begin_inset Quotes erd
\end_inset

 means that there is trace of rainfall on the ground, but the actual rainfall
 is too small to be measurable.
 Because this explaination, I replace all 
\begin_inset Quotes eld
\end_inset

T
\begin_inset Quotes erd
\end_inset

 with 0.
\end_layout

\begin_layout Standard
There are missing data in the numeric features as well.
 In order to process them, I first order them by store, item, and date,
 and perform linear interpolation on the result.
 For such interpolation, pandas provide a convenient function: pd.interpolate().
 This function uses linear interpolate by default.
 
\end_layout

\begin_layout Standard
This part of code is also in preprocessing.py file.
\end_layout

\begin_layout Subsection
Outliers
\end_layout

\begin_layout Standard
Two outliers are found at sales record: the highest and second highest sales
 record for item 5 is 5568 and 3369, while the third place is only 500.
 So I excluded these sales out of learning period.
 Note that the classifiers I use in this project are robust against outliers
 themselves, but I still exclude them for safety.
 
\end_layout

\begin_layout Standard
This part of code is also in preprocessing.py file.
\end_layout

\begin_layout Section
Feature Selection
\end_layout

\begin_layout Standard
As stated above, for some algorithms like linear regression or SVM, it is
 necessary to rule out linear dependent features to ensure good performance.
 Therefore, I carry out one more step for this.
 The technique I use is called Variance Inflation Factors (VIF).
\end_layout

\begin_layout Subsection
VIF
\end_layout

\begin_layout Standard
Some features have strong (linear) correlations between them, and that may
 affect the performance of some learning methods.
 So it is best to identify those correlations using variance inflation factor,
 also known as VIF.
\end_layout

\begin_layout Standard
For simplicity, I divided the features into several groups, and perform
 VIF on each group independently.
 Within those groups, one feature with VIF score higher than 3.0 is excluded,
 and VIF is performed again until no score is over 3.0.
 The groups I divided are:
\end_layout

\begin_layout Itemize
temperature related features: tmax, tmin, tavg, depart, dewpoint, wetbulb.
 All features but tavg are excluded
\end_layout

\begin_layout Itemize
rainfall related features: snowfall, preciptotal.
 The feature snowfall is excluded
\end_layout

\begin_layout Itemize
wind related features: resultspeed, resultdir, avgspeed.
 The features resultspeed and resultdir are excluded.
\end_layout

\begin_layout Itemize
other numeric features: stnpressure, sealevel.
 These features are constant values for same store, therefore, their information
 is not very meaningful given that store number is already in the features.
 Therefore, I exclude them without performing VIF.
\end_layout

\begin_layout Subsection
Feature Creation
\begin_inset CommandInset label
LatexCommand label
name "subsec:Feature-Creation"

\end_inset


\end_layout

\begin_layout Standard
After actually performing learning models, I find the following features
 useful: 
\end_layout

\begin_layout Itemize
Sales average for 7 days before the day.
\end_layout

\begin_layout Itemize
Sales average for 7 days after the day.
 
\end_layout

\begin_layout Itemize
Markers indicating if the day is within 3 days before a weather event, or
 within 3 days after a weather event.
 
\end_layout

\begin_layout Itemize
Weekday, month and year, since in my initial observation I find weekday,
 month and year have good relations with sales record.
\end_layout

\begin_layout Standard
Of course, in order to use categorical features such as weekday, month,
 year, store number, and item number, we need to transform them into dummy/indic
ator variables.
 Pandas provide this function by pandas.get_dummies().
 However, I later find that the data with all the dummy variables is too
 large for my laptop to handle, so I propose an alternative route in subsection
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Overall-Structure"

\end_inset

.
\end_layout

\begin_layout Standard
For simplicity, I won't list in detail how I reach those conclusions here.
 If you are interested, please see my data storytelling report and inferential
 statistics report at the following address: 
\begin_inset CommandInset citation
LatexCommand cite
key "proloc"

\end_inset

.
 I will give a brief summary of these two report as well as highlighting
 some interesting points in the following section, however.
\end_layout

\begin_layout Standard
It is also worth noting in advance that, as you will see in the result section,
 the performance of SVM is actually better if all the numeric weather features
 are excluded and only keep the indicators for extreme weather, rain, and
 snow.
 In the result section, you will see the performance difference between
 models with numeric weather features and without them.
\end_layout

\begin_layout Section
Initial Observation 
\end_layout

\begin_layout Standard
Initial observation is important.
 It can provide me direct impression on how the dataset looks like in terms
 of how sales change with date, month, year, rainfall and other features,
 and how these features interact with each other.
 This is helpful, for it will provide some initial ideas about which features
 might be useful for the coming learning task, and which learning structure
 might be useful in order to enhance learning efficiency.
 
\end_layout

\begin_layout Standard
In order to maintain the compact structure of this report, I do not put
 all my observation here.
 If you are interested in a full version, you can visit my data storytelling
 reports 1 & 2 and my inferential statistic report.
 They are available in the following folder: 
\begin_inset CommandInset citation
LatexCommand cite
key "proloc"

\end_inset

.
 From there you can see all my observation and how I test them using hypothesis
 testing.
 In this section, my plan is to directly jump to the conclusions I made,
 and only show part of my hypothesis testing procedure on some interesting
 points.
\end_layout

\begin_layout Standard
Here are the conclusions that still stand after inferential statistics test:
\end_layout

\begin_layout Itemize
The sales pattern of normal days is different from the sales pattern of
 extreme weather period.
 
\end_layout

\begin_layout Itemize
Item 5 sells best during extreme weather period.
 
\end_layout

\begin_layout Itemize
Features that indicating whether the day is a normal day, a day before a
 bad weather or a day after a bad weather could be useful since observation
 suggests that even when it is a sunny day, the sales record close to bad
 weather still differ from normal case.
 
\end_layout

\begin_layout Itemize
For item 5: Year does affect the sales record.
 
\end_layout

\begin_layout Itemize
For item 5: Weekday does affect the sales record.
 
\end_layout

\begin_layout Itemize
For item 5: Rainfall/Snowfall: Since we can indicate major events by event
 marker (see the part 1 report), whether rain/snow present is useful in
 predicting item 5 sales, but the amount of rainfall/snowfall does not matter
 that much.
 
\end_layout

\begin_layout Itemize
For item 5: Temperature: During normal days, The temperature and selling
 record surely has a correlation in general case.
 However, this correlation is not linear.
 Also, the correlation between temperature and selling record during major
 weather events is less stronger than the one during normal days.
\end_layout

\begin_layout Standard
You may notice I paid extra interest towards item 5.
 The reason for that is because there are 110 items in this dataset, and
 it is not practical to analyze them one by one.
 Instead, it would be more efficient to discuss some import items.
 From the figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:overall"

\end_inset

, I think item 5 is the most import one because: 
\end_layout

\begin_layout Enumerate
It is the best selling item during extreme weather events.
 Given our learning target is predicting item sales during extreme weather,
 the prediction error on item 5 is more likely to be the dominant part in
 the prediction error.
\end_layout

\begin_layout Enumerate
The sales of item 5 changes significantly between normal days and extreme
 weather event days.
 Therefore, performing exploratory data analysis (EDA) on this item is more
 likely to expose the correlation between sales and features, and the interactio
ns between features themselves.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename figs/item5_overall.png
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Top 10 hot sales item
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:overall"

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
As I stated, for simplicity I will only show part of my hypothesis test
 procedure in this report.
 
\end_layout

\begin_layout Standard
As stated above, the time features such as weekday are helpful towards learning
 task, for they have impacts on sales.
 Here I will show one point and how I evaluate it:
\end_layout

\begin_layout Itemize
For item 5: Weekday does affect the sales record.
 
\end_layout

\begin_layout Standard
The figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:weekday"

\end_inset

 shows what I observed:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename figs/weekday.png
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Item 5 sales on each weekday
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:weekday"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
I evaluate this claim by calculating the 99% confidence interval of average
 sales per weekday using bootstrap technique: I resampled the data using
 bootstrap sampling for 100000 times, calculate the daily average, and come
 up with 99% confidence interval.
 There is no interval overlapping between weekends plus Monday (Saturday,
 Sunday and Monday) and other weekdays (Tuesday, Wednesday, Thursday and
 Friday), so one can say that the selling record on weekdays do differ from
 one another.
\end_layout

\begin_layout Standard
Of course, I paid attention to other item as well, here is a claim I made
 in my inferential statistics report to support the point 
\begin_inset Quotes eld
\end_inset

The sales pattern of normal days is different from the sales pattern of
 extreme weather period.
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout Itemize
In extreme weather days, the sales record for item 45 dropped significantly.
\end_layout

\begin_layout Standard
This claim can be easily observed in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:overall"

\end_inset

.
 The daily average sales record for item 45 dropped from 25 in normal days
 to 16 in extreme weather days.
 I evaluate this claim by null hypothesis test.
 The null hypothesis is: 
\begin_inset Quotes eld
\end_inset

The item 45 sales record in extreme weather events is actually the same
 as the item 45 sales record in normal days".
 Then, I use permutation to calculate the p-value.
 The permutation is performed 100000 times, and the difference between permuted
 normal data and permuted extreme weather data never surpass the actual
 value.
 This means that the p-value is very close to 0, indicating that the null
 hypothesis does not stand.
 Therefore, in extreme weather days, the sales record for item 45 did drop.
\end_layout

\begin_layout Standard
For other evaluation and observation, please check my reports 
\begin_inset CommandInset citation
LatexCommand cite
key "proloc"

\end_inset

.
 But this is the recommendation I made towards features and regressors based
 on my initial observation:
\end_layout

\begin_layout Itemize
Because of the presence of non-linear correlation, linear models, such as
 linear regression and SVM may not work well.
 
\end_layout

\begin_layout Itemize
Because of the threshold effect of certain features (such as people just
 stop shopping when they see a tiny bit of rain or snow during normal days),
 Decision tree and Random Forests may work well.
 
\end_layout

\begin_layout Itemize
There might be a logical correlation between features indicating whether
 the day is a normal day, a day before a bad weather or a day after a bad
 weather.
 Because of this, using neural network on this project might be promising.
 
\end_layout

\begin_layout Section
Learning Method
\end_layout

\begin_layout Standard
Predicting the daily sales is a regression problem.
 But I need to choose appropriate regressors to make it work.
 Based on the recommendation from last section, the following regressors
 seem to be promising: support vector machine (SVM), random forest & decision
 tree, and neural network.
 We will discuss them in further detail in this section, but there is one
 problem before we come to that.
 As mentioned in subsection 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Feature-Creation"

\end_inset

, the memory of my laptop (8GB) is too small to train one regressor on the
 whole data with all the dummy variables/features.
 Therefore, I need to use an alternative route to train the regressor.
 The following subsection describes what I propose.
\end_layout

\begin_layout Subsection
Overall Structure
\begin_inset CommandInset label
LatexCommand label
name "subsec:Overall-Structure"

\end_inset


\end_layout

\begin_layout Standard
Below is a graph showing my workaround for not having enough memory, the
 general workflow of the learning method.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Graphics
	filename MLdia.jpg
	width 100col%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
General structure for regressor training 
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "fig:general_structer"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The basic idea for the learning method is looping over all possible combinations
 of store and item, and train a regressor for each unique combination.
 The reason for choosing this structure is:
\end_layout

\begin_layout Itemize
As stated, building a learning model for all the data requires a large memory
 that beyond my laptop's capability.
 
\end_layout

\begin_layout Itemize
There are quite a few store/item combinations with 0 sales record in the
 training set.
 For example, none of item 1 is actually sold in store 1.
 The best explanation for this is that for store 1, there is no storage
 of item 1 during the time period recorded in the dataset.
 For this reason, it is more appropriate to build a regressor for each store/ite
m combination, and just predict everything to 0 on the store/item combinations
 with 0 sales in training dataset.
 This provide higher efficiency and further shorten the training time.
\end_layout

\begin_layout Subsection
Algorithms
\end_layout

\begin_layout Standard
This subsection describes the algorithms I choose for the regressor.
 I choose four algorithms in this case: SVM, Decision Tree, Random Forest,
 and Neural Network.
\end_layout

\begin_layout Subsubsection
SVM
\end_layout

\begin_layout Standard
Linear models are the first regressor class I consider to choose, for they
 cost relatively less computational power, and usually have nice performance
 if the features and the target are linearly related.
 Moreover, the results given by linear models are usually easy to explain,
 the importance of two features can be easily compared by their corresponding
 coefficient parameters.
\end_layout

\begin_layout Standard
In order for SVM to perform better, I use log transformation on the sales
 record.
 This method is common in linear models, for it concentrates the data towards
 normal distribution.
\end_layout

\begin_layout Standard
For this project I use the SVR (SVM Regressor) in python scikit-learn package.
\end_layout

\begin_layout Subsubsection
Decision Tree & Random Forest
\end_layout

\begin_layout Standard
With so many binary indicators and dummy features in this project (such
 as dummy features for year, month, weekday), it is worth trying decision
 tree.
 These two method operate by dividing data based on applying thresholds
 to features.
 This behavior is quite similar to the dummy features and indicators, for
 these features only have 0 or 1 as values.
 Therefore, I think these two learning method can be a good match for this
 project.
\end_layout

\begin_layout Standard
For this project I use the Decision Tree and Random Forest Regressor in
 python scikit-learn package.
\end_layout

\begin_layout Subsubsection
Neural Network
\end_layout

\begin_layout Standard
Neural Network is without any doubt a powerful tool for a learning task
 with a non-linear structure.
 It can learn logistic operations like AND, OR and XOR.
 In my observations I find there could be logistical relations between features.
 Although the claim is finally rejected (see my inferential statistics report
 for details), it is still worth trying the neural network.
 
\end_layout

\begin_layout Standard
For this project I use the Deep Neural Network in TensorFlow package.
\end_layout

\begin_layout Subsection
The Part I Left Out
\end_layout

\begin_layout Standard
Maybe you have noticed which part I missed: parameter tuning.
 This part means optimize the parameters used by regressors, so that they
 have better performances than using default parameters.
 This part is quite important for neural network and have some impact on
 the performance of SVM, decision tree and random forest.
 I did not apply this part, for it takes too long for the code to run even
 in SVM case.
 Instead, I comment the code so that I can simply uncomment this part of
 code and run if I want to apply it in the future.
 
\end_layout

\begin_layout Section
Results and Performance
\end_layout

\begin_layout Standard
The result is shown in the figure below.
 The score used here is Root Mean Squared Logarithmic Error (RMSLE).
 It is also used for ranking in the competition.
 The numbers listed here come directly from the submission on the Kaggle
 website, so that they are comparable versus other competitors.
 The submission page and leaderboard can be found here: 
\begin_inset CommandInset citation
LatexCommand cite
key "kaggle"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="30col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="30col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Algorithm Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
File name 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
RMSLE score 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Training Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Base Submission 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_0_new.csv
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.11701
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result by a simple interpolation
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SVM version 1 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_fastsvm.csv_v3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.12024
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
trained with numeric weather features
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SVM version 2 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_fastsvm.csv_v4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.10286
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
trained without numeric weather features
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SVM version 3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_fastsvm.csv_v5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.10841
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
trained with linear kernel
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Decision Tree 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_tree_ver2.csv
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.11461
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
None
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Random Forest 
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
result_rf.csv
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.13851
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
None
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Deep Neural Network
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
 result_dnn.csv_ver2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.14245
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
None
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Results Table
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Using its default kernel "rbf", SVM gives better performance than the rest
 of the algorithm.
 The performance of SVM without numeric weather feature is better than the
 one with weather feature.
 Decision tree and random forest give slightly worse results, and deep neural
 network does not work so well on this project.
 I expect this result because there is no parameter tuning for neural netowrk.
\end_layout

\begin_layout Standard
The best result given by SVM put me in rank 80/485 among all the participants,
 and only has 0.009 difference from the top submission.
 The leaderboard for this competition can be found at here: 
\begin_inset CommandInset citation
LatexCommand cite
key "kaggle"

\end_inset

.
 If you want to confirm the score, all you need to do is downloading the
 result file, and making a submission on this link.
\end_layout

\begin_layout Standard
So now we have a series of nice predictors in hand, then what is the most
 dominant features in this problem? In other words, which factor is most
 dominant in deciding the sales record for the item? We interpolate this
 by averaging the coefficients of the SVM regressors using linear kernels,
 and select top 10 features using their absolute coefficient value (for
 other kernels do not provide coefficients):
\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="11" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="60col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coefficient Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Before_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.556280
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week before the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
After_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.526110
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week after the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.111950
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Sunday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-0.071970
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Thursday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.067471
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Saturday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Condition
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.066983
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
indicator feature marking the weather event day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-0.063852
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Wednesday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-0.039919
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Tuesday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
year_2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-0.038446
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for year 2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SN
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.032191
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
indicator feature marking a snow day
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Coef Table
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
We can see that the most dominant feature for the prediction is the average
 sales record of one week before the day and the average sales record of
 one week after the day.
 Besides that, weekdays seems to be more dominant than other features.
 Only two weather-related feature make the top 10.
 One is extreme weather indicator, another is snow indicator.
\end_layout

\begin_layout Standard
But is that really the whole picture? I did this by average over all items,
 there is still possibility for one feature play a dominant role in sales
 record for a single item, while the same feature does not matter much for
 other items.
 In order to see if this is the case, I list the top 5 coefficients for
 item 5, 9, and 45, the 3 top sellers in the dataset:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="60col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coefficient Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
15.224512
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Sunday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
After_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
13.548483
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week after the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Before_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
13.403635
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week before the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-8.166847
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Wednesday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-6.777929
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Tuesday
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Top 5 Coef Table For Item 5
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="60col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coefficient Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
61.013008
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Sunday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
year_2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-39.440597
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week after the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-34.352941
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week before the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
year_2012
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
32.930745
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Wednesday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-31.607478
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Tuesday
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Top 5 Coef Table For Item 9
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="60col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coefficient Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
year_2014
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-118.540682
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for year 2014
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
year_2012
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
97.290682
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for year 2012
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
88.562500
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Sunday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
-67.062500
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Wednesday
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
weekday_5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
48.000000
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for Saturday
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Top 5 Coef Table For Item 45
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
It seems that the conclusion holds: The weather for item does not have much
 influence on item sales, even on the item 45.
 It is a bit surprising to me since the sales of item 45 dropped by almost
 30% during extreme weather days.
 But, the result is the result.
\end_layout

\begin_layout Standard
However, it does not mean that the weekday are always the most dominant
 features.
 Take item 51 for example:
\end_layout

\begin_layout Standard
\begin_inset Float table
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="20col%">
<column alignment="center" valignment="top" width="60col%">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Coefficient Value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Note
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
After_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.773143
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week after the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
month_12
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.227078
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for December
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Before_Sales
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.046728
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Average sales of one week before the day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
SN
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.533850
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
indicator feature marking a snow day
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
month_1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.227107
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
dummy feature for January
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Top 5 Coef Table For Item 51
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
This item make more sales in December and January, and on a snowy day.
 This could be something related to low temperature or winter.
 For this item, weekday no longer play an important role in predicting item
 sales, all 12 month indicators have higher coefficient than weekdays.
 Therefore, it is important to analyze each item independently.
 
\end_layout

\begin_layout Section
Conclusion
\end_layout

\begin_layout Standard
In this project, I give a model that will predict product sales in major
 weather events.
 The model scores 80 out of 405 in the competition.
 Using Root Mean Squared Logarithmic Error (RMSLE) as evaluation score,
 it only has 0.009 difference from the best performing submission.
 Such model will help Walmart better manage their storage, and keep their
 valued customer out of rain.
 This model will also help them evaluating their current extreme weather
 management system.
 Besides, I look into which features might be more important for predicting
 sales.
 
\end_layout

\begin_layout Standard
If one wants to predict item sales in general, It turns out that the weather
 factor may not be that important after all: The two most dominant features
 for predicting sales in a given day are sales trending (sales average near
 the day) followed by what day it is in the week.
 This indicates that most items do not get affected in extreme weather.
\end_layout

\begin_layout Standard
However, taking a deeper look into the result, While weekday and average
 week sales remain to be very influential on item sales, the impact of them
 are different from item to item.
 For example, weekdays and years seems to be more important for item 9 sales.
 Therefore it is worth evaluating the result on item basis.
 
\end_layout

\begin_layout Standard
Based on my prediction result, my recommendation towards Walmart is:
\end_layout

\begin_layout Itemize
In general, sales record for past week and the weekday are the most dominant
 features for predicting one item sales in a given day.
\end_layout

\begin_layout Itemize
However the impacts are different from item to item, so it is wise to manage
 item storage independently.
 For items related to seasons, month and snowing might be a better indicator
 than weekday.
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "IEEEabrv,ref"
options "IEEEtran"

\end_inset


\end_layout

\end_body
\end_document
